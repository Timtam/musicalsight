import{g as B,r as f,j as n,d as K,f as V,H as Z,F as W,B as C}from"./index-CXcT0C4J.js";import{M as S,C as X,n as Q,a as ee,b as q,O as Y,c as N,g as T,d as te}from"./CatalogService-BEtntW3k.js";import{F as i,C as ne}from"./CategoryChecker-CEiCc5U4.js";import{c as _}from"./ProductFilter-DZwYJBCA.js";var E={exports:{}},re=E.exports,G;function ie(){return G||(G=1,function(r,g){(function(e,a,p){r.exports=p(),r.exports.default=p()})("slugify",re,function(){var e=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),a=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function p(y,l){if(typeof y!="string")throw new Error("slugify: string argument expected");l=typeof l=="string"?{replacement:l}:l||{};var d=a[l.locale]||{},b=l.replacement===void 0?"-":l.replacement,m=l.trim===void 0?!0:l.trim,h=y.normalize().split("").reduce(function(x,v){var c=d[v];return c===void 0&&(c=e[v]),c===void 0&&(c=v),c===b&&(c=" "),x+c.replace(l.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return l.strict&&(h=h.replace(/[^A-Za-z0-9\s]/g,"")),m&&(h=h.trim()),h=h.replace(/\s+/g,b),l.lower&&(h=h.toLowerCase()),h}return p.extend=function(y){Object.assign(e,y)},p})}(E)),E.exports}var ae=ie();const H=B(ae);function A(r){for(var g=[],e=1;e<arguments.length;e++)g[e-1]=arguments[e];var a=Array.from(typeof r=="string"?[r]:r);a[a.length-1]=a[a.length-1].replace(/\r?\n([\t ]*)$/,"");var p=a.reduce(function(d,b){var m=b.match(/\n([\t ]+|(?!\s).)/g);return m?d.concat(m.map(function(h){var x,v;return(v=(x=h.match(/[\t ]/g))===null||x===void 0?void 0:x.length)!==null&&v!==void 0?v:0})):d},[]);if(p.length){var y=new RegExp(`
[	 ]{`+Math.min.apply(Math,p)+"}","g");a=a.map(function(d){return d.replace(y,`
`)})}a[0]=a[0].replace(/^\r?\n/,"");var l=a[0];return g.forEach(function(d,b){var m=l.match(/(?:^|\n)( *)$/),h=m?m[1]:"",x=d;typeof d=="string"&&d.includes(`
`)&&(x=String(d).split(`
`).map(function(v,c){return c===0?v:""+h+v}).join(`
`)),l+=x+a[b+1]}),l}function se({response:r,onClose:g,onClosed:e}){let[a,p]=f.useState(!1);return f.useEffect(()=>p(r.type!==""),[r]),n.jsx(S,{restoreFocus:!1,show:a,onExited:e,onHide:()=>{r.type==="error"?g(!1):g(!0),p(!1),r={type:"",message:""}},children:r.type!==""?n.jsxs(n.Fragment,{children:[n.jsx(S.Header,{closeButton:!0,children:n.jsx(S.Title,{children:r.type==="success"?"Product submitted successfully!":"Error while submitting the product"})}),n.jsx(S.Body,{children:r.type==="success"?n.jsx("p",{children:"Thank you for submitting the new product! It'll be added as soon as possible."}):n.jsxs("p",{children:["An error occurred while submitting your product. Please try again later or get in touch to receive further support. The error is:"," ",r.message]})})]}):""})}const I=r=>{var g;return{name:(r==null?void 0:r.name)||"",categories:r!=null&&r.categories?[...r.categories]:[],url:(r==null?void 0:r.url)||"",demo:(r==null?void 0:r.demo)||"",size:r!=null&&r.size?r.size:void 0,price:((g=r==null?void 0:r.price)==null?void 0:g.toString())||"",nks:(r==null?void 0:r.nks)||!1,description:(r==null?void 0:r.description)||"",accessibility_description:(r==null?void 0:r.accessibility_description)||"",os:r!=null&&r.os?[...r.os]:[],requires:r!=null&&r.requires?r.requires:[],contains:r!=null&&r.contains?r.contains:[],additional_links:(r==null?void 0:r.additional_links)||{},vendor:(r==null?void 0:r.vendor.id)||"",vendorName:"",vendorUrl:"",vendorAaf:!1,userName:"",userEmail:""}};function ue(){let r=f.useMemo(()=>new X,[]),g=f.useMemo(()=>Q(),[]),[e,a]=f.useState(I()),[p,y]=f.useState({type:"",message:""}),[l]=K(),[d,b]=f.useState(!1),[m,h]=f.useState({product:"none",version:""}),[x,v]=f.useState(!1),[c,w]=f.useState({name:"",link:""}),[J,D]=f.useState(!1),[$,L]=f.useState(""),[F,U]=f.useState(!1),O=f.useRef(null),M=V();return f.useEffect(()=>{let t=l.get("p");if(t&&t!==""){let s=r.getProductById(t);s&&(a(I(s)),b(!0))}},[l,r]),n.jsxs(n.Fragment,{children:[n.jsx(Z,{title:d?"Update a catalog entry":"Submit a catalog entry"}),n.jsx(W,{ref:O,title:d?"Update a product within the catalog":"Submit a product to the catalog"}),d?n.jsx("p",{children:"All the product's data was autofilled into the form below. Feel free to update whatever information you want to correct and submit the changed entry by clicking the button on the bottom of the page. Thanks for your help!"}):n.jsx("p",{children:"In the case that you know a product which doesn't yet exist in this catalog, you can enter all relevant data below and send it to us. Please note however that the entry will not be inserted automatically and it'll most likely take some time for the catalog to update. Thank you for helping this catalog grow!"}),n.jsx(se,{response:p,onClose:t=>{if(t&&(a(I()),d)){let s=l.get("p");s&&s!==""&&M(`/catalog/product/${s}`)}y({type:"",message:""})},onClosed:()=>{O.current&&O.current.focus()}}),n.jsx("h4",{children:"Product information"}),n.jsxs(i,{children:[n.jsx("h5",{children:"Product details"}),n.jsxs(i.Group,{children:[n.jsx(i.Label,{for:"form-details-name",children:"Product name *"}),n.jsx(i.Control,{id:"form-details-name",required:!0,type:"input",placeholder:"Enter the product title",value:e.name,onChange:t=>a({...e,name:t.target.value})}),n.jsx(i.Label,{for:"form-details-url",children:"Product URL"}),n.jsx(i.Control,{id:"form-details-url",type:"input",placeholder:"https://www.vendor.com/product",value:e.url,onChange:t=>a({...e,url:t.target.value})}),n.jsx(i.Label,{for:"form-details-demo-url",children:"Audio demo URL (YouTube, SoundCloud or anything comparable)"}),n.jsx(i.Control,{id:"form-details-demo-url",type:"input",placeholder:"https://www.youtube.com/watch?v=abc012345",value:e.demo,onChange:t=>a({...e,demo:t.target.value})}),n.jsx(i.Label,{for:"form-details-size",children:"Size in MB (leave empty if unknown)"}),n.jsx(i.Control,{id:"form-details-size",type:"number",value:e.contains.length>0||e.size!==void 0?ee(e.size,e.contains):"",disabled:e.contains.length>0,onChange:t=>a({...e,size:t.target.value!==""?parseInt(t.target.value):void 0})}),n.jsx(i.Label,{for:"form-details-price",children:"Price in USD (enter 0 if the product is free, leave empty if unknown)"}),n.jsx(i.Control,{type:"number",step:"0.01",lang:"en",id:"form-details-price",value:e.price,onChange:t=>{isNaN(parseInt(t.target.value))||a({...e,price:t.target.value})}}),n.jsx(i.Label,{for:"form-details-nks",children:"NKS Support"}),n.jsxs(i.Select,{value:e.nks===!0||typeof e.nks=="string"?"yes":"no",id:"form-details-nks",onChange:t=>a({...e,nks:t.target.value==="yes"}),children:[n.jsx("option",{value:"no",children:"No"}),n.jsx("option",{value:"yes",children:"Yes"})]}),n.jsx(i.Label,{for:"form-details-nks-details",children:"Additional NKS information?"}),n.jsx(i.Control,{disabled:e.nks!==!0,as:"textarea",id:"form-details-nks-details",placeholder:"Enter additional information when necessary",value:typeof e.nks=="string"?e.nks:"",onChange:t=>a({...e,nks:t.target.value!==""?t.target.value:!0})}),n.jsx(i.Label,{for:"form-details-description",children:"Product description"}),n.jsx(i.Control,{as:"textarea",id:"form-details-description",placeholder:"Enter product description",value:e.description,onChange:t=>a({...e,description:t.target.value})}),n.jsx(i.Label,{for:"form-details-accessibility-description",children:"Accessibility description"}),n.jsx(i.Control,{as:"textarea",id:"form-details-accessibility-description",placeholder:"Enter a description of the product accessibility",value:e.accessibility_description,onChange:t=>a({...e,accessibility_description:t.target.value})})]}),n.jsx("h5",{children:"Vendor"}),n.jsxs(i.Group,{children:[n.jsx(i.Label,{for:"form-vendor-select",children:"Select vendor"}),n.jsxs(i.Select,{value:e.vendor,id:"form-vendor-select",onChange:t=>a({...e,vendor:t.target.value}),children:[n.jsx("option",{value:""}),n.jsx("option",{value:"new",children:"(not listed here, enter details below)"}),r.getVendors().sort((t,s)=>g(t.name,s.name)).map(t=>n.jsx("option",{value:t.id,children:t.name}))]}),n.jsx(i.Label,{for:"form-vendor-name",children:"Vendor name *"}),n.jsx(i.Control,{id:"form-vendor-name",required:!0,type:"input",placeholder:"Enter vendor name",disabled:e.vendor!=="new",value:e.vendorName,onChange:t=>a({...e,vendorName:t.target.value})}),n.jsx(i.Label,{for:"form-vendor-url",children:"Vendor URL *"}),n.jsx(i.Control,{type:"input",id:"form-vendor-url",placeholder:"Enter vendor website URL",disabled:e.vendor!=="new",value:e.vendorUrl,onChange:t=>a({...e,vendorUrl:t.target.value})}),n.jsx(i.Check,{label:"Vendor is partnered with Able Artist Foundation *",type:"checkbox",id:"form-vendor-aaf",disabled:e.vendor!=="new",checked:e.vendorAaf,onChange:t=>a({...e,vendorAaf:t.target.checked})})]}),n.jsx("h5",{children:"Product bundle"}),n.jsx("p",{children:"If this is a product bundle please add the individual products here."}),n.jsxs(i.Group,{children:[e.contains.length>0?n.jsx("div",{role:"list","aria-label":"Contained products",children:e.contains.map(t=>n.jsxs("div",{role:"listitem",children:[n.jsx("p",{children:`${t.name} by ${t.vendor.name}`}),n.jsx(C,{ref:s=>{s&&F&&(s.focus(),U(!1))},onClick:s=>{e.contains.includes(t)&&a({...e,contains:e.contains.filter(o=>o!==t)})},children:"Remove this product"})]}))}):n.jsx("p",{children:"No contained products added so far."}),n.jsx(i.Label,{for:"form-contains-selector",children:"Select the contained product"}),n.jsxs(i.Select,{id:"form-contains-selector",value:$,onChange:t=>{L(t.target.value)},children:[n.jsx("option",{value:"none",children:"(select a product that should be part of this bundle)"}),r.getProducts(_()).filter(t=>!e.contains.includes(t)).sort((t,s)=>g(`${t.name} ${t.vendor.name}`,`${s.name} ${s.vendor.name}`)).map(t=>n.jsx("option",{value:t.id,children:`${t.name} by ${t.vendor.name}`}))]}),n.jsx(i.Label,{for:"form-contains-submit",children:"Add contained product"}),n.jsx(i.Control,{id:"form-contains-submit",type:"button",disabled:$==="",onClick:t=>{a({...e,contains:[...e.contains,r.getProductById($)]}),U(!0),L("")}})]}),n.jsx("h5",{children:"Product Categories"}),n.jsx(i.Group,{controlId:"formCategories",children:r.getCategories().filter(t=>!t.parent).sort((t,s)=>g(t.name,s.name)).map(t=>n.jsx(ne,{category:t,catalog:r,disabled:e.contains.length>0,checked:s=>q(e.categories,e.contains).includes(s),onChange:(s,o)=>{o?q(e.categories,e.contains).includes(s)||a({...e,categories:[...e.categories,s]}):q(e.categories,e.contains).includes(s)&&a({...e,categories:e.categories.filter(k=>k!==s)})}}))}),n.jsx("h5",{children:"Supported operating systems"}),n.jsx(i.Group,{children:Object.keys(Y).filter(t=>!isNaN(parseInt(t))&&parseInt(t)!==Y.UNKNOWN).map(t=>n.jsx(i.Check,{id:`form-os-${t}`,type:"checkbox",disabled:e.contains.length>0||e.requires.length>0,label:T(parseInt(t)),checked:N(e.os,e.requires,e.contains).includes(parseInt(t)),onChange:s=>{s.target.checked===!0?N(e.os,e.requires,e.contains).includes(parseInt(t))||a({...e,os:[...e.os,parseInt(t)]}):N(e.os,e.requires,e.contains).includes(parseInt(t))&&a({...e,os:e.os.filter(o=>o!==parseInt(t))})}}))}),n.jsx("h5",{children:"Product requirements"}),n.jsxs(i.Group,{children:[e.requires.length>0||e.contains.length>0?n.jsx("div",{role:"list","aria-label":"Required products",children:te(e.requires,e.contains).map(t=>n.jsxs("div",{role:"listitem",children:[n.jsx("p",{children:t.version?`${t.product.name} (minimum version ${t.version}) by ${t.product.vendor.name}`:`${t.product.name} by ${t.product.vendor.name}`}),n.jsx(C,{ref:s=>{s&&x&&(s.focus(),v(!1))},disabled:e.contains.length>0,onClick:s=>{e.requires.includes(t)&&a({...e,requires:e.requires.filter(o=>o!==t)})},children:"Remove this requirement"})]}))}):n.jsx("p",{children:"No requirements added so far."}),n.jsx(i.Label,{for:"form-requirements-selector",children:"Select the required product"}),n.jsxs(i.Select,{id:"form-requirements-selector",value:m.product,disabled:e.contains.length>0,onChange:t=>{h({product:t.target.value,version:m.version})},children:[n.jsx("option",{value:"none",children:"(select a product this product should require)"}),r.getProducts(_()).sort((t,s)=>g(`${t.name} ${t.vendor.name}`,`${s.name} ${s.vendor.name}`)).map(t=>n.jsx("option",{value:t.id,children:`${t.name} by ${t.vendor.name}`}))]}),n.jsx(i.Label,{for:"form-requirements-version",children:"Required minimum version (optional)"}),n.jsx(i.Control,{id:"form-requirements-version",type:"input",disabled:m.product==="none",value:m.version,onChange:t=>{v(!0),h({product:m.product,version:t.target.value})}}),n.jsx(i.Label,{for:"form-requirements-submit",children:"Add new requirement"}),n.jsx(i.Control,{id:"form-requirements-submit",type:"button",disabled:m.product==="none",onClick:t=>{a({...e,requires:[...e.requires,{product:r.getProductById(m.product),version:m.version!==""?m.version:void 0}]}),h({product:"none",version:""})}})]}),n.jsx("h5",{children:"Additional links"}),n.jsxs(i.Group,{children:[Object.keys(e.additional_links).length>0?n.jsx("div",{role:"list","aria-label":"Additional links",children:Object.entries(e.additional_links).map(([t,s])=>n.jsxs("div",{role:"listitem",children:[n.jsx("p",{children:`${t}: ${s}`}),n.jsx(C,{ref:o=>{o&&J&&(o.focus(),D(!1))},onClick:o=>{e.additional_links[t]!==void 0&&a({...e,additional_links:{...e.additional_links,[t]:s}})},children:"Remove this link"})]}))}):n.jsx("p",{children:"No links added so far."}),n.jsx(i.Label,{for:"form-links-name",children:"Descriptive Text"}),n.jsx(i.Control,{id:"form-links-name",type:"input",value:c.name,onChange:t=>{w({name:t.target.value,link:c.link})}}),n.jsx(i.Label,{for:"form-links-link",children:"URL"}),n.jsx(i.Control,{id:"form-links-link",type:"input",value:c.link,onChange:t=>{w({name:c.name,link:t.target.value})}}),n.jsx(i.Label,{for:"form-links-submit",children:"Add new link"}),n.jsx(i.Control,{id:"form-links-submit",type:"button",disabled:c.name===""||c.link==="",onClick:t=>{a({...e,additional_links:{...e.additional_links,[c.name]:c.link}}),w({name:"",link:""})}})]}),n.jsx("h5",{children:"Personal information"}),n.jsx("p",{children:"You don't need to enter those details, they're only necessary if I should be able to get back to you in the case that questions come up or important details are missing."}),n.jsxs(i.Group,{children:[n.jsx(i.Label,{for:"form-user-name",children:"Your Name"}),n.jsx(i.Control,{id:"form-user-name",type:"input",value:e.userName,onChange:t=>a({...e,userName:t.target.value})}),n.jsx(i.Label,{for:"form-user-email",children:"Your Email"}),n.jsx(i.Control,{id:"form-user-email",type:"email",value:e.userEmail,onChange:t=>a({...e,userEmail:t.target.value})})]}),n.jsx(C,{disabled:e.name===""||e.vendor===""||e.vendor==="new"&&(e.vendorName===""||e.vendorUrl===""),onClick:async t=>{let s=u=>JSON.stringify(u.map(j=>j.version?[j.product.id,j.version]:j.product.id)),o="",k="",z=H(e.name,{lower:!0,strict:!0});const P=e.categories.filter(u=>u.id!=="unclassified");if(t.preventDefault(),e.vendor==="new"?(k=H(e.vendorName,{lower:!0}),o+=A`[${k}]
    name = "${e.vendorName}"
    url = "${e.vendorUrl}"`,e.vendorAaf&&(o+=`
aaf = true`),o+=`
`):k=e.vendor,o+=A`[${z}]
    vendor = "${k}"
    name = "${e.name}"`,o+=`
`,e.contains.length===0&&P.length>0&&(o+=`categories = ${JSON.stringify(P.map(u=>u.id))}
`),e.contains.length===0&&e.requires.length>0&&(o+=`requires = ${s(e.requires)}
`),e.contains.length>0&&(o+=`contains = ${JSON.stringify(e.contains.map(u=>u.id))}
`),e.contains.length===0&&e.size!==void 0&&(o+=`size = ${e.size}
`),e.url!==""&&(o+=`url = "${e.url}"
`),e.demo!==""&&(o+=`demo = "${e.demo}"
`),e.price!==""&&(o+=`price = ${e.price}
`),typeof e.nks=="string"?o+=`nks = "${e.nks}"
`:e.nks===!0&&(o+=`nks = ${e.nks}
`),e.description!==""&&(o+=A`description = """\\
${e.description}\\
"""`,o+=`
`),e.accessibility_description!==""&&(o+=A`accessibility_description = """\\
${e.accessibility_description}\\
"""`,o+=`
`),e.contains.length===0&&e.requires.length===0&&e.os.length>0&&(o+=`os = ${JSON.stringify(e.os.map(u=>T(u).toLowerCase()))}
`),Object.keys(e.additional_links).length>0){o+=`[${z}.additional_links]
`;for(const[u,j]of Object.entries(e.additional_links))o+=`"${u}" = "${j}"
`}try{let u={message:o.replaceAll(`
`,"<br />"),subject:d?`APIAC Product update for product ${e.name}`:`APIAC Product submission for product ${e.name}`,accessKey:"56f0885e-efe6-4378-9bf4-673bc7b3b00d"};e.userName!==""&&(u.name=e.userName),e.userEmail!==""&&(u.email=e.userEmail,u.replyTo="@");let R=await(await fetch("https://api.staticforms.xyz/submit",{method:"POST",body:JSON.stringify(u),headers:{"Content-Type":"application/json"}})).json();R.success?y({type:"success",message:""}):y({type:"error",message:R.message})}catch(u){y({type:"error",message:u})}},variant:"primary",children:d?"Submit update":"Submit product"})]})]})}export{ue as Component};
